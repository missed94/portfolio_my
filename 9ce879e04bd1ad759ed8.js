(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{103:function(t,e,n){},104:function(t,e,n){},105:function(t,e,n){},125:function(t,e,n){"use strict";var i=n(103);n.n(i).a},126:function(t,e,n){"use strict";var i=n(104);n.n(i).a},127:function(t,e,n){"use strict";var i=n(105);n.n(i).a},142:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return B}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"reviews",tag:"div",mode:"out-in",appear:""}},[n("div",{key:3,staticClass:"reviews-page-component"},[n("div",{staticClass:"reviews-content"},[n("div",{staticClass:"container"},[n("div",{staticClass:"page-content-header"},[n("div",{staticClass:"title"},[t._v('Блок "Отзывы"')])]),n("div",{staticClass:"content"},[n("div",{staticClass:"form-content"},[1==t.shownForm?n("form-reviews",{attrs:{review:t.review},on:{submit:t.submitForm,close:t.handleUnShownForm}}):t._e()],1),n("div",{staticClass:"reviews-container"},[n("ul",{staticClass:"reviews-list"},[n("li",{staticClass:"reviews-item"},[n("square-btn",{attrs:{type:"square",title:"Добавить работу"},on:{click:t.handleNewReview}})],1),t._l(t.reviews,(function(e){return n("li",{key:e.id,staticClass:"reviews-item"},[n("card-reviews",{attrs:{review:e},on:{"remove-review":function(n){return t.removeReviewNow(e.id)},"update-review":t.updateReview}})],1)}))],2)])])])])])])};i._withStripped=!0;var r=n(0),s=n.n(r),a=n(1),o=n.n(a),c=n(20),l=n.n(c),u=(n(50),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-reviews-component"},[n("form",{attrs:{id:"form"},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[n("card",{attrs:{title:"Новый отзыв"}},[n("div",{staticClass:"form-content",attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"photo-adder-component"},[n("div",{staticClass:"photo-adder-content"},[n("div",{staticClass:"error-message",class:{error:t.validation.hasError("preview")}},[t._v(t._s(t.validation.firstError("preview")))]),n("label",{on:{drop:t.handleChange}},[n("div",{staticClass:"photo-wrapper"},[n("div",{class:["photo",{active:t.preview}],style:t.thePhoto})]),n("div",{staticClass:"btn-wrapper"},[n("appButton",{attrs:{plain:"",typeAttr:"file",title:"Добавить фото"},on:{change:t.handleChange}})],1)])])]),n("div",{staticClass:"reviewer-info"},[n("div",{staticClass:"reviewer-desc"},[n("app-input",{staticClass:"name-input",attrs:{title:"Имя автора",errorMessage:t.validation.firstError("newReview.author")},model:{value:t.newReview.author,callback:function(e){t.$set(t.newReview,"author",e)},expression:"newReview.author"}}),n("app-input",{staticClass:"link-input",attrs:{title:"Титул автора",errorMessage:t.validation.firstError("newReview.occ")},model:{value:t.newReview.occ,callback:function(e){t.$set(t.newReview,"occ",e)},expression:"newReview.occ"}})],1),n("div",{staticClass:"review"},[n("app-input",{attrs:{title:"Отзыв",fieldType:"textarea",errorMessage:t.validation.firstError("newReview.text")},model:{value:t.newReview.text,callback:function(e){t.$set(t.newReview,"text",e)},expression:"newReview.text"}})],1),n("div",{staticClass:"add-info-btns"},[n("appButton",{attrs:{plain:"",title:"Отмена"},on:{click:function(e){return t.$emit("close")}}}),n("appButton",{attrs:{typeAttr:"submit",title:"СОХРАНИТЬ"}})],1)])])])],1)])});u._withStripped=!0;var v=n(72),p=n(82),d=n(81),w=n(7),f=n(43);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _={mixins:[n(43).mixin],validators:{"newReview.author":function(t){return f.Validator.value(t).required("Заполните")},"newReview.occ":function(t){return f.Validator.value(t).required("Заполните")},"newReview.text":function(t){return f.Validator.value(t).required("Заполните")},preview:function(t){return f.Validator.value(t).required("Загрузите фотографию")}},components:{card:p.a,appButton:d.a,appInput:v.a},props:{review:{type:Object||null,default:null},shownForm:{type:Boolean}},created:function(){this.review&&(this.newReview=m({},this.review),this.preview="https://webdev-api.loftschool.com/".concat(this.review.photo))},methods:m(m({},Object(w.b)({addNewReview:"reviews/add",updateReview:"reviews/update"})),{},{handleSubmit:function(){var t=this;return o()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$validate();case 2:if(e.t0=e.sent,!0!==e.t0){e.next=12;break}if(!t.newReview.id){e.next=9;break}return e.next=7,t.updateReview(t.newReview);case 7:e.next=11;break;case 9:return e.next=11,t.addNewReview(t.newReview);case 11:t.$emit("submit");case 12:case"end":return e.stop()}}),e)})))()},handleChange:function(t){t.preventDefault();var e=t.dataTransfer?t.dataTransfer.files[0]:t.target.files[0];this.newReview.photo=e,this.renderPhoto(e)},renderPhoto:function(t){var e=this,n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){e.preview=n.result}}}),computed:{thePhoto:function(){var t=this.preview;return"background-image: url(".concat(t,")")}},data:function(){return{preview:"",newReview:{author:"",occ:"",text:"",photo:{}}}}},b=(n(125),n(19)),g=Object(b.a)(_,u,[],!1,null,"6481bbff",null);g.options.__file="src/admin/components/formReviews/formReviews.vue";var C=g.exports,y=n(80),x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-reviews-component"},[n("card",[n("div",{staticClass:"reviewer-avatar",attrs:{slot:"title"},slot:"title"},[n("avatar",{attrs:{size:"2.7",src:t.avatar}}),t._v(" "),n("div",{staticClass:"reviewer-wrapper"},[n("div",{staticClass:"reviewer-name"},[t._v(t._s(t.review.author))]),t._v(" "),n("div",{staticClass:"reviewer-occ"},[t._v(" "+t._s(t.review.occ))])])],1),t._v(" "),n("div",{staticClass:"content-wrapper",attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"review"},[n("p",{staticClass:"review-text"},[t._v(t._s(t.review.text))])]),t._v(" "),n("div",{staticClass:"card-reviews-btns"},[n("icon",{attrs:{symbol:"pencil",title:"Править"},on:{click:t.handleUpdate}}),t._v(" "),n("icon",{attrs:{symbol:"cross",title:"Удалить"},on:{click:t.handleRemove}})],1)])])],1)};x._withStripped=!0;var O=n(83),R=n(89),j={components:{icon:O.a,card:p.a,avatar:R.a},props:{review:{type:Object}},methods:{handleRemove:function(){console.log("click"),this.$emit("remove-review")},handleUpdate:function(){this.$emit("update-review",this.review)}},computed:{avatar:function(){return"https://webdev-api.loftschool.com/".concat(this.review.photo)}}},S=(n(126),Object(b.a)(j,x,[],!1,null,"15abe267",null));S.options.__file="src/admin/components/cardReviews/cardReviews.vue";var $=S.exports;function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var E={components:{formReviews:C,squareBtn:y.a,cardReviews:$},data:function(){return{shownForm:!1,review:null}},computed:P({},Object(w.c)("reviews",{reviews:function(t){return t.data}})),watch:{shownForm:function(){this.shownForm||(this.review=null)}},methods:P(P({},Object(w.b)({fetchReviews:"reviews/fetch",removeReviews:"reviews/remove",updateReviews:"reviews/update",showTooltip:"tooltips/show"})),{},{removeReviewNow:function(t){var e=this;return o()(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.removeReviews(t);case 2:e.showTooltip({text:"Запись удалена",type:"success"});case 3:case"end":return n.stop()}}),n)})))()},submitForm:function(){this.handleUnShownForm(),this.showTooltip({text:"Запись сохранена",type:"success"})},updateReview:function(t){var e=this;return o()(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.handleUnShownForm();case 2:e.review=t,e.handleShownForm();case 4:case"end":return n.stop()}}),n)})))()},handleShownForm:function(){this.shownForm=!0,this.$el.scrollIntoView({block:"start",behavior:"smooth"})},handleUnShownForm:function(){this.shownForm=!1},handleNewReview:function(){var t=this;return o()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleUnShownForm();case 2:t.review=null,t.handleShownForm();case 4:case"end":return e.stop()}}),e)})))()}}),mounted:function(){this.fetchReviews()}},F=(n(127),Object(b.a)(E,i,[],!1,null,"2c7c3bd3",null));F.options.__file="src/admin/pages/reviews/reviews.vue";var B=F.exports},71:function(t,e,n){},72:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"input"===t.fieldType?n("label",{staticClass:"input",class:[{input_labeled:!!t.title,"no-side-paddings":t.noSidePaddings},t.iconClass,{error:!!t.errorMessage}]},[t.title?n("div",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),n("input",t._b({staticClass:"input__elem field__elem",domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}},"input",t.$attrs,!1)),t._v(" "),n("div",{staticClass:"input__error-tooltip"},[n("tooltip",{attrs:{text:t.errorMessage}})],1)]):"textarea"===t.fieldType?n("label",t._b({staticClass:"textarea",class:{error:!!t.errorMessage}},"label",t.$attrs,!1),[t.title?n("div",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),n("textarea",{staticClass:"textarea__elem field__elem",class:{error:!!t.errorMessage},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),t._v(" "),n("div",{staticClass:"input__error-tooltip"},[n("tooltip",{attrs:{text:t.errorMessage}})],1)]):t._e()};i._withStripped=!0;var r={inheritAttrs:!1,props:{title:{type:String,default:""},errorMessage:{type:String,default:""},noSidePaddings:Boolean,fieldType:{type:String,default:"input"},value:String|Number,icon:{type:String,default:"",validator:function(t){return["","user","key"].includes(t)}}},computed:{iconClass:function(){var t=this.icon;return t.length?" input_iconed input_icon-".concat(t):""}},components:{tooltip:function(){return n.e(2).then(n.bind(null,146))}}},s=(n(78),n(19)),a=Object(s.a)(r,i,[],!1,null,"b4a4ba36",null);a.options.__file="src/admin/components/input/input.vue";e.a=a.exports},73:function(t,e,n){},74:function(t,e,n){},75:function(t,e,n){},77:function(t,e,n){},78:function(t,e,n){"use strict";var i=n(71);n.n(i).a},80:function(t,e,n){"use strict";var i=function(){var t=this.$createElement,e=this._self._c||t;return e("button",this._g({staticClass:"square-btn-component",attrs:{type:"button"}},this.$listeners),[e("div",{staticClass:"text"},[e("div",{staticClass:"sign"}),this._v(" "),e("div",{staticClass:"title"},[this._v(this._s(this.title))])])])};i._withStripped=!0;var r={props:{title:{type:String,default:"Добавить работу"}}},s=(n(86),n(19)),a=Object(s.a)(r,i,[],!1,null,"00e96a68",null);a.options.__file="src/admin/components/button/types/squareBtn/squareBtn.vue";e.a=a.exports},81:function(t,e,n){"use strict";var i=function(){var t=this.$createElement;return(this._self._c||t)(this.type,this._g(this._b({tag:"component"},"component",this.$attrs,!1),this.$listeners))};i._withStripped=!0;var r={props:{type:{type:String,default:"default"}},components:{default:function(){return n.e(13).then(n.bind(null,145))},square:function(){return n.e(12).then(n.bind(null,136))},iconed:function(){return n.e(10).then(n.bind(null,137))},round:function(){return n.e(11).then(n.bind(null,138))}}},s=n(19),a=Object(s.a)(r,i,[],!1,null,null,null);a.options.__file="src/admin/components/button/button.vue";e.a=a.exports},82:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.simple?n("div",{staticClass:"card-component card_plain"},[t._t("default")],2):t.slim?n("div",{staticClass:"card-component card_slim"},[n("div",{staticClass:"header"},[t._t("title")],2),t._v(" "),n("div",{staticClass:"content"},[t._t("content")],2)]):n("div",{staticClass:"card-component"},[n("div",{staticClass:"header"},[n("div",{staticClass:"text",domProps:{textContent:t._s(t.title)}}),t._v(" "),!1==!!t.title?t._t("title"):t._e()],2),t._v(" "),n("div",{staticClass:"content"},[t._t("content")],2)])};i._withStripped=!0;var r={props:{title:{type:String,default:""},simple:Boolean,slim:Boolean}},s=(n(84),n(19)),a=Object(s.a)(r,i,[],!1,null,"29953562",null);a.options.__file="src/admin/components/card/card.vue";e.a=a.exports},83:function(t,e,n){"use strict";var i=function(){var t=this.$createElement;return(this._self._c||t)("button",this._g({class:["icon-component",this.iconClass,{grayscale:this.grayscale},{"no-words":!1==!!this.title}],attrs:{"data-text":this.title,type:"button"}},this.$listeners))};i._withStripped=!0;var r={props:{symbol:{type:String,default:"pencil",validator:function(t){return["pencil","cross","tick","trash"].includes(t)}},grayscale:{type:Boolean},title:{type:String,default:""}},computed:{iconClass:function(){return"is-".concat(this.symbol)}}},s=(n(85),n(19)),a=Object(s.a)(r,i,[],!1,null,"325d0eef",null);a.options.__file="src/admin/components/icon/icon.vue";e.a=a.exports},84:function(t,e,n){"use strict";var i=n(73);n.n(i).a},85:function(t,e,n){"use strict";var i=n(74);n.n(i).a},86:function(t,e,n){"use strict";var i=n(75);n.n(i).a},89:function(t,e,n){"use strict";var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"avatar-component",style:this.measures},[e("img",this._b({staticClass:"image",attrs:{alt:"user picture"}},"img",this.$attrs,!1))])};i._withStripped=!0;var r={props:{size:{type:String,default:"3"}},computed:{measures:function(){var t=Number(this.size);return{width:"".concat(t,"rem"),height:"".concat(t,"rem")}}}},s=(n(94),n(19)),a=Object(s.a)(r,i,[],!1,null,"3142f16f",null);a.options.__file="src/admin/components/avatar/avatar.vue";e.a=a.exports},94:function(t,e,n){"use strict";var i=n(77);n.n(i).a}}]);